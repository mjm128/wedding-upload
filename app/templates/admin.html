<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="google" content="notranslate">
    <title>Admin Dashboard</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <!-- Purge Modal -->
    <div id="purge-modal" style="display:none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 3000; align-items: center; justify-content: center;">
        <div class="glass-card" style="max-width: 400px; text-align: center; padding: 30px; border-color: red;">
            <h2 style="color:red; margin-top:0;">‚ö†Ô∏è PURGE ALL DATA</h2>
            <p>This action cannot be undone. All photos, videos, and records will be deleted.</p>
            <input type="password" id="purge-pin" placeholder="Enter PIN" style="width: 100%; margin: 10px 0; padding: 10px; box-sizing: border-box;">
            <div style="display:flex; gap:10px; margin-top:10px;">
                <button class="btn" style="background-color:#d32f2f; flex:1;" onclick="submitPurge()">CONFIRM PURGE</button>
                <button class="btn-secondary" style="flex:1;" onclick="hidePurgeModal()">Cancel</button>
            </div>
        </div>
    </div>

    <div class="container" style="max-width: 1000px; margin: 0 auto; padding: 20px;">
        <div style="display:flex; justify-content:flex-end; margin-bottom:10px;">
            <a href="/" class="btn-secondary" style="text-decoration:none; display:flex; align-items:center; padding:8px 12px; border-radius:20px;">
                <span style="font-size:1.2em; margin-right:5px;">üè†</span> Home
            </a>
        </div>

        <div class="glass-card">
            <div style="display:flex; justify-content:space-between; align-items:center;">
                <h1>Admin Dashboard</h1>
                <button class="btn" style="background-color:#d32f2f; color:white; padding:5px 10px; font-size:0.8em;" onclick="showPurgeModal()">PURGE DATA</button>
            </div>

            <div id="stats" style="margin-bottom: 20px; font-size: 0.9em; line-height: 1.6;">
                Loading stats...
            </div>

            <div style="margin-bottom: 20px;">
                <h3>Media Moderation</h3>
                 <div id="filter-bar" style="display:flex; flex-wrap:wrap; gap:15px; margin-bottom:10px; background: var(--glass-bg); padding:10px; border-radius:8px;">
                    <input type="text" id="media-search" placeholder="Filter by name, caption..." style="flex:2; min-width:200px; padding:8px;" onkeyup="filterMedia()">
                    <div>
                        <label><input type="radio" name="filter" value="all" checked onchange="filterMedia()"> All</label>
                        <label><input type="radio" name="filter" value="starred" onchange="filterMedia()"> Starred</label>
                        <label><input type="radio" name="filter" value="hidden" onchange="filterMedia()"> Hidden</label>
                    </div>
                    <div>
                        <label><input type="radio" name="type" value="all" checked onchange="filterMedia()"> All Types</label>
                        <label><input type="radio" name="type" value="image" onchange="filterMedia()"> Photos</label>
                        <label><input type="radio" name="type" value="video" onchange="filterMedia()"> Videos</label>
                    </div>
                </div>
            </div>

            <div style="margin-bottom: 20px;">
                <h3>Global Banners</h3>
                <div id="current-banner-display-en" style="margin-bottom: 5px; font-style: italic; color: var(--accent-color);"></div>
                <input type="text" id="banner-input-en" placeholder="English Banner..." style="width:100%; padding:8px; box-sizing:border-box; margin-bottom:5px;">
                <div id="current-banner-display-es" style="margin-bottom: 5px; font-style: italic; color: var(--accent-color);"></div>
                <input type="text" id="banner-input-es" placeholder="Spanish Banner..." style="width:100%; padding:8px; box-sizing:border-box; margin-bottom:10px;">
                <button class="btn" onclick="setBanner()">Set Banners</button>
                <button class="btn btn-secondary" onclick="clearBanners()">Clear All</button>
            </div>
        </div>

        <div class="glass-card">
            <h2>Media Moderation</h2>
            <div id="media-grid" class="masonry-grid">
                <!-- Loaded via JS -->
            </div>
            <button class="btn" id="load-more-btn" onclick="loadMedia()" style="display:none; width:100%; margin-top:10px;">Load More</button>
        </div>
    </div>

    <script src="/static/js/utils.js"></script>
    <script src="/static/js/admin.js"></script>
</body>
</html>
